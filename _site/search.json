[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Blogs",
    "section": "",
    "text": "Bayer Leverkusen Goal Analysis\n\n\n\n\n\n\n\nFootball\n\n\nPassing\n\n\nBundesliga\n\n\n\n\n\n\n\n\n\n\n\nGareth Edwards\n\n\n\n\n\n\n  \n\n\n\n\nWelcome To My Blog\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nJul 15, 2024\n\n\nTristan O’Malley\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Gareth Edwards",
    "section": "",
    "text": "Hi, I’m Gareth Edwards from Cape Town, South Africa. I am a Data Scientist at the Council for Scientific and Industrial Research. I’ve got my undergraduate degree in Bsc Computer Science and Applied Stats, BSc Honours in Computer Science and Bsc Masters in Data Science all from the University of Cape Town.\nBut really I just love football. Far from being young enough, or good enough to burst on to the scene like Micah Richards, I have decided to take the less flashy path and try my hand in football analytics instead and herein lies my attempt to get into the football business.\nFootball, much like the world has been saturated in data to the point where we are drowning in it. Data Science is everywhere and new research on football is being done on every conceivable topic of the game. While data is great and gives us the tools to view patterns not apparent to the human eye, we also run the risk of working so hard at the data that we end up forgetting what the goal was in the first place.\nSo, here’s what I propose, lets keep it simple… Please. Boil it down, take a step back, see the bigger picture. As scientists we love to sound smart and look smart and feel smart but at the end of the day, all the smarts is nothing if nobody else understands you. Football is a beautiful game, but it also, just a game. The more we complicate anything in life, the more complicated life becomes.\nWhat I have seen in football analytics so far, bar a few groundbreaking pieces of work (thank you Karun), is just a whole lot of over complication. In my series of blog posts I aim to keep it simple and concise. My approach is to start with the bigger picture and then work my way to the data from there. There is no use finding problems for the sake of solving problems (the way of many a scientist).\nSo, take a look through my blogs and I hope you see the value and appreciate the simplcity in the work! Please don’t hesitate to reach out if you would like to chat or even to offer some constructive criticism. I am all ears."
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "This is a post with executable code.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "Gareth Edwards",
    "section": "",
    "text": "Masters in Data Science | Feb 2020 - December 2022 | University of Cape Town\nHonours in Computer Science | April 2019 - March 2020 | University of Cape Town\nBSc Computer Science and Applied Statistics | Feb 2015 - April 2019 | University of Cape Town"
  },
  {
    "objectID": "about.html#experience",
    "href": "about.html#experience",
    "title": "Gareth Edwards",
    "section": "Experience",
    "text": "Experience\n\nResearch Data Scientist | Council for Scientific and Industrial Research | April 2020 - present\nData Science Tutor at Edx | 2U | Nov 2023 - present\nFreelance Blogger | Data Bear | Dec 2023 - present"
  },
  {
    "objectID": "posts/Bayer Leverkusen/index.html",
    "href": "posts/Bayer Leverkusen/index.html",
    "title": "Bayer Leverkusen Goal Analysis",
    "section": "",
    "text": "Introduction\nThe 2023/24 season of the Bundesliga will be remembered as one of the most extraordinary chapters in German football history. Bayer Leverkusen, a club often overshadowed by giants like Bayern Munich and Borussia Dortmund, etched their name in the annals of football with an unbeaten season. This remarkable achievement was a testament to the strategic acumen of their manager, the skill and determination of the players, and the unwavering support of their fans.\nBayer Leverkusen has become the talk of the town in the world of football, and the question on everyone’s minds now will be, “can they do it again?” My first question however, is why was no one able to beat them?\nI am a strong believer of “Attack wins you games, defense wins you titles” So, my first approach to beating a team would be to figure out how do we keep them from scoring!\n\n\nMy Focus\nMy Focus in this blog is on the passing. If we are to keep it as simple as possible, we know that football is really about moving the ball and scoring a goal. If you can move the ball around well, you can score goals. On the other hand, if you know how a team moves the ball around, you can stop the team from scoring.\nI have seen many analysts take an overall look at a teams passing and then develop passing networks based on heaps of passing data, most of which were sideways and backward passes. What I have decided to do is take a closer look, and zoom in on passing and passing sequences that lead to goals only.\nMy first order of action, given that I haven’t watched a Bayer Leverkusen match last season, was to visualise all their goals for the 23/24 Bundesliga season. In the interactive visual below we can select a match and view all the unbroken passing sequences that lead to Leverkusen goals (Note: Some matches have no visualisation as there were no goals scored by Leverkusen in those matches).\n\n\nYou might be confused by the grey dotted line on the plots that is labelled as “Avg Direction of Play” on the legend. This is simply a line of best fit that goes through all the player locations in the passing sequence.\nWhen we look at some of these plots we can see a nice, abstracted view, of goals scored by Bayer Leverkusen, but, when the passing sequences become a bit more lengthy we may start to get lost in the dots and lines (see the goal scored at 46:16 in the RB Leipzig vs Bayer Leverkusen match).\nTo, somewhat, alleviate this problem, one can use passing networks. Passing networks are a great visualisation as they contain a large amount of information in one plot. Now, often I have seen passing networks based on passing data from a whole match, or even a whole season, but this often includes many sideways and backwards passes that we might not be that interested about. Below we see a plot of a passing network plot for Bayern Leverkusen that takes into account all of their passes for the season, compared to a passing network that is based only on passes that lead to goals.\n\n\n\n\n\n\n\n\n\n\nOne of the main aspects we look at when it comes to passing networks is the centrality index (C). There are many ways to calculate centrality. In this blog we have used the following calculation:\n\\(C=\\frac{\\sum_{i=1}^{N} (P_* \\cdot P_i)}{(N-1) \\sum_{i=1}^{N} p_i}\\)\nCentrality ranges from the values 0 to 1 and is a measure of how diverse or not diverse a team was with their passing. If we have a team with a centrality index of 100% (or 1) it means that there was only one person that everyone in that team passed to and that one person distributed the ball to everyone else. Whereas a centrality index values closer to 0 means that everyone in the team share the ball equally and there is not one person that stands out.\nBayer Leverkusen had a centrality index of 7% for both their passing network over the whole season and their passing network for goals only (although someone can check me on this). A centrality index of 7% means that goals came from all over the pitch and they were a difficult team to predict.\nThe data shows it. Bayer Leverkusen was scoring goals from everywhere, and it seems it was very difficult to tie them down. A striker, attacking mid, left back and right back make up the top four!\n\nBayer Leverkusen Top Goal Scorers\n\n\nPlayer\nGoals\nAssists\n\n\n\n\nVictor Boniface\n14\n8\n\n\nFlorian Wirtz\n11\n11\n\n\nAlex Grimaldo\n10\n13\n\n\nJeremie Frimpong\n9\n7\n\n\nPatrik Schik\n7\n-\n\n\nJonas Hofmann\n5\n7\n\n\nNathan Tella\n5\n2\n\n\nAmine Adli\n4\n4\n\n\nExequiel Palacios\n4\n5\n\n\nJonathan Tah\n4\n1\n\n\n\nAs decentralised as Leverkusen might seem, I can’t help but notice the change of shape between the average position of players compared to their goal scoring position. Some players, like Xhaka, Boniface and Hoffmann don’t have a drastic change in average position. But if we are to look at Wirtz, Grimaldo and Reyna, we see that they seem to be drawn together during build ups to goal. Based on the goal scoring outcomes, we see that Leverkusen favoured their left-side to an extent. One idea to stopping Leverkusen might be to lock down the left side and be extra careful of the Reyna, Grimaldo and Wirtz triangle.\nAnother interesting point I notice is the link between Jonathan Tah and Granit Xhaka. There were 13 passes between them in Leverkusen’s build up. Compare this with the Writz - Grimaldo passing link that took place 12 times within goal sequences, or the Writz - Xhaka passing link that took place 10 times. Now, again, this is a great example of Leverkusen’s decentralised nature, but it does show us something interesting. Perhaps blocking some passes between Tah and Xhaka is more important than one might think.\nIn the modern game center backs have become less brute and more brains and the example of Jonathan Tah here is testimant to that. Going forward, if the center back is able to find the midfield pivot with a good pass, you can now successfully turn defense into attack. It is pointless if Xhaka finds himself with space in the middle of the field but neither of the center backs can find him.\nThen adding on this finding, we see that Tapsoba doesn’t possess the same ability to find the midfielders as Tah does. Instead, Tapsoba often hands the ball over to Tah to get the ball moving forward it seems. My thinking here, if you want to quell the Leverkusen attack from the root, block passing lines between Tah and Xhaka and allow Tapsoba to have possession of the ball without presenting him with the Tah pass. This is likely going to make Leverkusen using a passing sequence that is not usually what they would use if they were building up to a goal.\n\n\nConclusion\nThese passing networks showed why Bayer Leverkusen was so difficult to stop. Their decentralised style of play and the talent they possessed in each area of the pitch was a formidable opponent to all. But we do still see some patterns: Some clear player shifts that lead to goals and defenders potentially forming the root of the goal scoring passing sequence. Food for thought for any defenders and managers rearing up to face the defending Bundesliga champions next season."
  },
  {
    "objectID": "overHere.html",
    "href": "overHere.html",
    "title": "testDoc",
    "section": "",
    "text": "#| standalone: true\n\nprint(getwd())\nleverkusen_23_24_events = readRDS('posts/data/leverkusen_23_24_events.rds')\nleverkusen_23_24_matches = readRDS('posts/data/leverkusen_23_24_matches.rds')\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(shiny)\nlibrary(shinythemes)\nlibrary(shinylive)\nlibrary(SBpitch)\nlibrary(ggsoccer)\n\n# Function to count passes before each goal\nmoves_before_goal &lt;- function(goal_index, events_df) {\n  goal_event &lt;- events_df %&gt;% filter(index == goal_index)\n  team_id &lt;- goal_event$possession_team.name\n  \n  # Loop through events backwards from the goal event\n  event_list = list()\n  for (i in (goal_index):1) {\n    event &lt;- events_df[i, ]\n    \n    # Stop if possession changes to a different team\n    if (event$possession_team.name != goal_event$possession_team.name |\n        !(event$type.name %in% c(\"Ball Receipt*\",\n                                 \"Pass\",\n                                 \"Carry\",\n                                 \"Pressure\",\n                                 \"Dribble\",\n                                 \"Dribbled Past\",\n                                 \"Shield\",\n                                 \"50/50\",\n                                 \"Shot\")) |\n        event$pass.outcome.name %in% c(\"Out\", \"Incomplete\")) {\n      break\n    }\n    \n    # add event to the list\n    event_list[[length(event_list) + 1]] &lt;- event\n    \n  }\n  \n  # Convert the list to a dataframe\n  events_before_goal_df &lt;- do.call(rbind, event_list)\n  return(events_before_goal_df)\n}\n\n# plot the pass map\npassmap_plot &lt;- function(data) {\n  \n  data &lt;- data %&gt;%\n    mutate(x=unlist(lapply(location, function(v) as.numeric(v[1]))),\n           y=unlist(lapply(location, function(v) as.numeric(v[2]))),\n           pass_end_x=unlist(lapply(pass.end_location, function(v) ifelse(is.null(v), NA, as.numeric(v[1])))),\n           pass_end_y=unlist(lapply(pass.end_location, function(v) ifelse(is.null(v), NA, as.numeric(v[2])))),\n           carry_end_x=unlist(lapply(carry.end_location, function(v) ifelse(is.null(v), NA, as.numeric(v[1])))),\n           carry_end_y=unlist(lapply(carry.end_location, function(v) ifelse(is.null(v), NA, as.numeric(v[2]))))) %&gt;%\n    ungroup() %&gt;%\n    filter(!(type.name %in% c(\"Pressure\", \"Dribbled Past\", \"Ball Receipt*\", \"Carry\"))) %&gt;%\n    mutate(row_number = row_number()) %&gt;%\n    mutate(prev_x = lag(x), \n           prev_y = lag(y),\n           prev_pass_end_x = lag(pass_end_x),\n           prev_pass_end_y = lag(pass_end_y))\n  \n  # plot passes and carries on pitch (including linear model of best fit line)\n  # create custom legend\n  if(nrow(data)==1){\n    create_Pitch() +\n      geom_point(data = data, aes(x = x, y = y, size=13, alpha=0.5)) +\n      geom_text(data = data, aes(x = x, y = y, label = row_number), \n                size = 3, color = \"red\", vjust = -1) +\n      scale_y_reverse() +\n      theme_pitch() +\n      ggtitle(paste0(\"Shot at Goal (no passing sequence)\")) +\n      theme(plot.title = element_text(size = 20, face = \"bold\"),\n            plot.subtitle = element_text(size = 16),\n            legend.position=\"none\")\n  }\n  else{\n    create_Pitch() +\n      geom_point(data = data, aes(x = x, y = y)) +\n      geom_segment(data = data, aes(x = x, y = y, xend = pass_end_x, yend = pass_end_y, linetype = \"Passes\", color = \"Passes\"),\n                   arrow = arrow(length = unit(0.08, \"inches\"))) +\n      geom_segment(data = data, aes(x = prev_pass_end_x, y = prev_pass_end_y, xend = x, yend = y, linetype = \"Carries\", color = \"Carries\")) +\n      \n      geom_text(data = data, aes(x = x, y = y, label = row_number), \n                size = 5, color = \"red\", vjust = -1) +\n      \n      geom_smooth(data = data, aes(x = x, y = y, linetype = \"Avg Direction of Play\", color = \"Avg Direction of Play\"), method = \"lm\", se = FALSE) +\n      \n      scale_y_reverse() +\n      \n      \n      scale_linetype_manual(name = \"Legend\",\n                            values = c(\"Passes\" = \"solid\", \"Carries\" = \"dotted\", \"Avg Direction of Play\" = \"solid\")) +\n      scale_color_manual(name = \"Legend\",\n                         values = c(\"Passes\" = \"black\", \"Carries\" = \"black\", \"Avg Direction of Play\" = \"blue\")) +\n      guides(linetype = guide_legend(override.aes = list(color = c(\"black\", \"blue\", \"black\")))) +\n      theme_pitch() +\n      theme(legend.position = \"right\")\n  }\n  \n}\n\n# interactive passing sequence shiny app\nui &lt;- fluidPage(\n  titlePanel(\"Interactive Passing Path to Goal\"),\n  \n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"team_input\", \"Select Team\", choices = unique(leverkusen_23_24_events$team.name)),\n      selectInput(\"match_input\", \"Select Match\", choices = unique(leverkusen_23_24_matches$match_name)),\n      selectInput(\"goal_index\", \"Select Goal Index\", choices = NULL)\n    ),\n    \n    mainPanel(\n      plotOutput(\"passmap\"),\n      fluidRow(\n        #column(6, tableOutput('playersInMove')),\n        column(6, tableOutput('goalScorer'))\n      )\n    )\n  )\n)\n\nserver &lt;- function(input, output, session) {\n  \n  observe({\n    match_goals &lt;- leverkusen_23_24_events %&gt;%\n      filter(match_name == input$match_input & possession_team.name == input$team_input &\n               shot.outcome.name == \"Goal\" & shot.type.name == \"Open Play\") %&gt;%\n      select(timestamp_readable)\n\n    updateSelectInput(session, \"goal_index\", choices = match_goals$timestamp_readable)\n  })\n\n  # selected_events &lt;- reactive({\n  #   req(input$match_id, input$goal_index)\n  #   aMatch &lt;- leverkusen_23_24_events %&gt;% filter(match_id == input$match_id)\n  #   moves_before_goal(input$goal_index, aMatch)\n  # })\n  \n  output$passmap &lt;- renderPlot({\n    # req(selected_events())\n    aMatch &lt;- leverkusen_23_24_events %&gt;% filter(match_name == input$match_input)\n    print(unique(aMatch$match_id))\n    # get index for the selected timestamp\n    goal_index = aMatch %&gt;% filter(timestamp_readable==input$goal_index & shot.outcome.name==\"Goal\") %&gt;% pull(index)\n    print(goal_index)\n\n    events_before_goal = moves_before_goal(goal_index, aMatch)\n\n    passes_before_goal &lt;- events_before_goal %&gt;%\n      select(c(index, type.name, player.name, pass.recipient.name, location, pass.end_location, carry.end_location)) %&gt;%\n      arrange(index)\n\n    passes_before_goal[passes_before_goal == \"NULL\"] &lt;- NA\n    par(mar = c(0.1, 0.1, 0.1, 0.1))\n    passmap_plot(passes_before_goal)\n  })\n\n  output$playersInMove &lt;- renderTable({\n    aMatch &lt;- leverkusen_23_24_events %&gt;% filter(match_name == input$match_input)\n    goal_index &lt;- aMatch %&gt;% filter(timestamp_readable == input$goal_index & shot.outcome.name == \"Goal\") %&gt;% pull(index)\n\n    events_before_goal &lt;- moves_before_goal(goal_index, aMatch)\n    players_involved &lt;- events_before_goal %&gt;%\n      arrange(index) %&gt;%\n      filter(team.name==input$team_input & type.name %in% c(\"Pass\", \"Shot\")) %&gt;%\n      mutate(row_number = row_number()) %&gt;%\n      select(row_number, player.name) %&gt;%\n      rename(`Order of Players Involvement`= player.name, `No.` = row_number)\n\n    players_involved\n  })\n  \n  output$goalScorer &lt;- renderTable({\n    aMatch &lt;- leverkusen_23_24_events %&gt;% filter(match_name == input$match_input)\n    scorer &lt;- aMatch %&gt;% filter(timestamp_readable == input$goal_index & shot.outcome.name == \"Goal\") %&gt;%\n      select(player.name) %&gt;%\n      rename(`Goal Scorer` = player.name)\n  })\n}\n\nshinyApp(ui, server)"
  }
]